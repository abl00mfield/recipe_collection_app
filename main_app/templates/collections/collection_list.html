{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/collection-list.css' %}">
<title>Your Collections</title>
{% endblock%}

{% block content %}
<h2>Your Collections</h2>

{% if collections %}
<div class="collection-list">
    {% for collection in collections%}
    <div class="collection-card" data-href="{% url 'collection_detail' collection.id %}" >
        <form 
            method="POST" 
            action="{% url 'collection_delete' collection.id %}"
            class="delete-form"
            onsubmit="return confirm('Delete this collection?');"
        >
        {% csrf_token %}
            <button type="submit" class="delete-icon" title="Delete Collection" aria-label="Delete Collection">
                <i class="fa-solid fa-trash"></i>
            </button>
        </form>
        
        <h3>{{ collection.name }}</h3>
        <div class="recipe-thumb-container">
            {% if collection.recipes.first and collection.recipes.first.photo %}
              <img 
                src="{{ collection.recipes.first.photo.url }}" 
                alt="{{ collection.recipes.first.title }}" 
                class="recipe-thumb"
              />
            {% else %}
              <img 
                src="{% static 'img/default_recipe.jpg' %}" 
                alt="Default recipe image" 
                class="recipe-thumb"
              />
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
    <p>No collections yet. </p>
{% endif %}

{% endblock %}

